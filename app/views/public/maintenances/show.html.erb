<p id="notice"><%= notice %></p>

<div class="container">
  <div class="row">
    <div class="col-md-6">
      <p class="w-25"><strong>車両画像:</strong><%= image_tag @maintenance.car.car_image, class:"img-fluid", alt:"Car Image" %></p>
      <% if @maintenance.user == current_user %>
        <p><strong>公開設定:</strong>
          <% if @maintenance.published? %>
            <span class="badge bg-success">公開</span>
          <% else %>
            <span class="badge bg-secondary">非公開</span>
          <% end %>
        </p>
      <% end %>
      <p><strong>車種:</strong><%= @maintenance.car.car_name %></p>
      <p><strong>タイトル:</strong><%= @maintenance.title %></p>
      <p><strong>作業日:</strong> <%= @maintenance.maintenance_day %></p>
      <p><strong>作業内容:</strong> <%= @maintenance.maintenance %></p>
      <p><strong>作業難易度:</strong> <%= @maintenance.work_difficulty %></p>
      <p><strong>使用工具画像:</strong>
        <% if @maintenance.get_tool_images.present? %>
          <%= image_tag @maintenance.get_tool_images, class: "img-fluid w-25", alt: "Tool Image" %>
        <% else %>
          <img src="<%= asset_path('no_image.jpg') %>" class="img-fluid" alt="No Image">
        <% end %>
      </p>
      <p><strong>作業時間:</strong><%= @maintenance.work_time %></p>
      <p><strong>作業料金:</strong><%= @maintenance.work_pay %></p>

      <p><strong>作業画像と説明:</strong></p>

      <% if @maintenance.images.present? %>
        <% @maintenance.images.each_with_index do |image, i| %>
          <div class="mb-3">
            <%= image_tag image, class: "img-thumbnail", style: "width: 25%;" %>

            <% desc = @maintenance.work_descriptions[i] %>
            <% if desc.present? %>
              <p><strong>説明:</strong> <%= desc.description %></p>
            <% else %>
              <p><strong>説明:</strong> なし</p>
            <% end %>
          </div>
        <% end %>
      <% end %>
      <p><strong>関連URL:</strong> <%= @maintenance.related_information %></p>
      
      <%= link_to "更新", edit_maintenance_path(@maintenance), class: "btn btn-primary" %>
      <%= link_to "一覧", maintenances_path, class: "btn btn-secondary" %>
      <%= link_to '削除', maintenance_path(@maintenance), method: :delete, data: { confirm: '本当に削除しますか？' }, class: 'btn btn-danger' %>
    </div>
    <div class='col-md-6'>
      <table>
        <tr>
         <td>コメント数: <%= @maintenance.maintenance_comments.count %></td>
          <% if @maintenance.user == current_user %><% end %>
        </tr>
      </table>

      <%= render "public/maintenance_comments/index", maintenance: @maintenance %>
      <%= render "public/maintenance_comments/form", maintenance: @maintenance, maintenance_comment: @maintenance_comment %>

    </div>
  </div>
</div>