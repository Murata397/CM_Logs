<p id="notice"><%= notice %></p>
<p id="alert"><%= flash[:alert] %></p>

<div class="container">
  <div class="row">
    <div class="col-md-10">
      <h1>Group</h1>
      <table class='table table-hover table-inverse'>
        <thead>
          <tr>
            <th>グループ画像</th>
            <th>グループ名</th>
            <th>紹介文</th>
            <th>テーマ</th>
            <th>ルール</th>
            <th>会員</th>
            <th colspan="3"></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><%= image_tag url_for(@group.group_image.first), size:'300x300' %></td>
            <td><%= @group.group_name %></td>
            <td><%= @group.group_introduction %></td>
            <td><%= @group.group_theme %></td>
            <td><%= @group.group_rules %></td>
            <td>
              <% @group.users.each do |user| %>
                <li>
                  <%= link_to user.name, user_path(user) %>
                  <% if @group.is_owner_by?(current_user) && user != current_user %>
                    <%= link_to '強制退会', remove_member_group_path(@group, user), method: :delete, data: { confirm: '本当にユーザーを削除しますか？' }, class: "btn btn-sm btn-danger" %>
                  <% end %>
                </li>
              <% end %>
            </td>
          </tr>
        </tbody>
      </table>
        <% if @group.is_owner_by?(current_user) %>
          <div class="row">
            <div class="col-md-6">
              <%= link_to '編集', edit_group_path(@group), class: "btn btn-sm btn-success" %>
            </div>
            <div class="col-md-6">
              <%= link_to 'イベント通知', new_group_event_notice_path(@group), class: "btn btn-sm btn-info" %>
            </div>
          </div>
        <% else %>
          <div class="row">
            <div class="col-md-6">
              <% if @group.includesUser?(current_user)%>
                <%= link_to 'グループを脱退', group_group_users_path(@group), method: :delete, class: "btn btn-sm btn-danger" %>
              <% else %>
                <%= link_to '参加リクエスト', group_requests_path(@group), method: :post, class: "btn btn-primary" %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="col-md-2">
        <% if @owner_user.present? && current_user == @owner_user %>
          <%= render 'public/requests/index', requests: @requests %>
        <% end %>
      </div>
    </div>
  </div>
</div>