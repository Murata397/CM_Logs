<p id="notice"><%= notice %></p>

<% if flash[:alert].present? %>
  <p class="alert"><%= flash[:alert] %></p>
<% end %>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1>Admin's Maintenance List</h1>
      <%= link_to "削除済みメンテナンス一覧", deleted_index_admin_maintenances_path, class: "btn btn-secondary" %>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>公開状態</th>
            <th>車種</th>
            <th>タイトル</th>
            <th>作業日</th>
            <th>作業内容</th>
            <th>作業難易度</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% if @maintenances.present? %>
            <% @maintenances.each do |maintenance| %>
              <tr class="<%= 'table-danger' if maintenance.deleted_at.present? %>">
                <td>
                  <% if maintenance.published? %>
                    <span class="badge bg-success">公開</span>
                  <% else %>
                    <span class="badge bg-secondary">非公開</span>
                  <% end %>
                </td>
                <td><%= maintenance.car&.car_name %></td>
                <td><%= maintenance.title %></td>
                <td><%= maintenance.maintenance_day %></td>
                <td><%= maintenance.maintenance %></td>
                <td><%= maintenance.work_difficulty %></td>
                <td>
                  <% if maintenance.deleted_at.present? %>
                    <%= link_to '復元', restore_admin_maintenance_path(maintenance),method: :patch,class: 'btn btn-success' %>
                  <% else %>
                    <%= link_to '詳細', admin_maintenance_path(maintenance), class: 'btn btn-info' %>
                    <%= link_to '削除', admin_maintenance_path(maintenance),method: :delete,data: { confirm: '本当に削除しますか？' },class: 'btn btn-danger' %>
                  <% end %>
                </td>
                <td>コメント数: <%= maintenance.maintenance_comments.count %></td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>